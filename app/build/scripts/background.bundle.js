!function t(e,n,r){function o(u,s){if(!n[u]){if(!e[u]){var c="function"==typeof require&&require;if(!s&&c)return c(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+u+"'")}var a=n[u]={exports:{}};e[u][0].call(a.exports,function(t){var n=e[u][1][t];return o(n?n:t)},a,a.exports,t,e,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(t){var e,n,r,o,i,u,s;u=function(){var t;return(t=function(){return this})()},s=u(),e=t("../../common.coffee"),chrome.app.runtime.onLaunched.addListener(function(){return chrome.app.window.create("index.html",{id:"mainwin",bounds:{width:770,height:800}})}),n=t("../../config.coffee"),i=t("../../storage.coffee"),r=t("../../filesystem.coffee"),o=t("../../server.coffee"),s.app=new e({Storage:new i,FS:new r,Server:new o}),s.app.Server.getLocalFile=app.getLocalFile,chrome.runtime.onSuspend.addListener(function(){return s.app.Storage.saveAll(null)})},{"../../common.coffee":2,"../../config.coffee":3,"../../filesystem.coffee":4,"../../server.coffee":9,"../../storage.coffee":10}],2:[function(t,e){var n,r,o,i,u,s,c,a,f=function(t,e){return function(){return t.apply(e,arguments)}},p={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var r in e)p.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t("./util.coffee"),r=t("./config.coffee"),u=t("./msg.coffee"),i=t("./listen.coffee"),a=t("./storage.coffee"),o=t("./filesystem.coffee"),s=t("./notification.coffee"),c=t("./server.coffee"),n=function(t){function e(t){this.changePort=f(this.changePort,this),this.getLocalFile=f(this.getLocalFile,this),this.openApp=f(this.openApp,this);var n;e.__super__.constructor.apply(this,arguments),null==this.MSG&&(this.MSG=u.get()),null==this.LISTEN&&(this.LISTEN=i.get());for(n in t)"object"==typeof t[n]&&(this[n]=this.wrapObjInbound(t[n])),"function"==typeof t[n]&&(this[n]=this.wrapObjOutbound(new t[n]));this.Storage.onDataLoaded=function(t){return function(){return null==t.Storage.data.firstTime?(t.Storage.data.firstTime=!1,t.Storage.data.maps.push({name:"Salesforce",url:"https.*/resource(/[0-9]+)?/([A-Za-z0-9-._]+/)?",regexRepl:"",isRedirect:!0,isOn:!1})):void 0}}(this),null==this.Notify&&(this.Notify=(new s).show),this.data=this.Storage.data,this.wrap="APP"===this.SELF_TYPE?this.wrapInbound:this.wrapOutbound,this.openApp=this.wrap(this,"Application.openApp",this.openApp),this.launchApp=this.wrap(this,"Application.launchApp",this.launchApp),this.startServer=this.wrap(this,"Application.startServer",this.startServer),this.restartServer=this.wrap(this,"Application.restartServer",this.restartServer),this.stopServer=this.wrap(this,"Application.stopServer",this.stopServer),this.getFileMatch=this.wrap(this,"Application.getFileMatch",this.getFileMatch),this.wrap="EXTENSION"===this.SELF_TYPE?this.wrapInbound:this.wrapOutbound,this.getResources=this.wrap(this,"Application.getResources",this.getResources),this.getCurrentTab=this.wrap(this,"Application.getCurrentTab",this.getCurrentTab),chrome.runtime.getPlatformInfo(function(t){return function(e){return t.platform=e}}(this)),this.init()}return l(e,t),e.prototype.LISTEN=null,e.prototype.MSG=null,e.prototype.Storage=null,e.prototype.FS=null,e.prototype.Server=null,e.prototype.Notify=null,e.prototype.platform=null,e.prototype.currentTabId=null,e.prototype.init=function(){return this.Storage.session.server={},this.Storage.session.server.status=this.Server.status},e.prototype.getCurrentTab=function(t){return chrome.tabs.query({active:!0,currentWindow:!0},function(e){return function(n){return e.currentTabId=n[0].id,"function"==typeof t?t(e.currentTabId):void 0}}(this))},e.prototype.launchApp=function(t,e){return chrome.management.launchApp(this.APP_ID,function(){return function(n){return chrome.runtime.lastError?e(chrome.runtime.lastError):"function"==typeof t?t(n):void 0}}(this))},e.prototype.openApp=function(){return chrome.app.window.create("index.html",{id:"mainwin",bounds:{width:770,height:800}},function(t){return function(e){return t.appWindow=e}}(this))},e.prototype.getCurrentTab=function(t){return chrome.tabs.query({active:!0,currentWindow:!0},function(e){return function(n){return e.currentTabId=n[0].id,"function"==typeof t?t(e.currentTabId):void 0}}(this))},e.prototype.getResources=function(t){return this.getCurrentTab(function(e){return function(n){return chrome.tabs.executeScript(n,{file:"scripts/content.js"},function(n){var r,o,i,u,s,c;for(e.data.currentResources.length=0,i=0,s=n.length;s>i;i++)for(r=n[i],u=0,c=r.length;c>u;u++)o=r[u],e.data.currentResources.push(o);return"function"==typeof t?t(null,e.data.currentResources):void 0})}}(this))},e.prototype.getLocalFile=function(t,e){var n,r,o,i,u,s;if(r=t.uri,null==r)return e("file not found");for(o=[],s=this.data.directories,i=0,u=s.length;u>i;i++)n=s[i],n.isOn&&o.push(n);return"/"===r.substring(0,1)&&(r=r.substring(1)),this.findFileForPath(o,r,function(){return function(t,n){return null!=t?"function"==typeof e?e(t):void 0:n.file(function(t){return"function"==typeof e?e(null,n,t):void 0},function(t){return"function"==typeof e?e(t):void 0})}}(this))},e.prototype.startServer=function(t){return this.Server.status.isOn===!1?this.Server.start(null,null,null,function(e){return function(n){return null!=n?(e.Notify("Server Error","Error Starting Server: "+error),"function"==typeof t?t(n):void 0):(e.Notify("Server Started","Started Server "+e.Server.status.url),"function"==typeof t?t(null,e.Server.status):void 0)}}(this)):"function"==typeof t?t("already started"):void 0},e.prototype.stopServer=function(t){return this.Server.stop(function(e){return function(n){return null!=n?(e.Notify("Server Error","Server could not be stopped: "+error),"function"==typeof t?t(n):void 0):(e.Notify("Server Stopped","Server Stopped"),"function"==typeof t?t(null,e.Server.status):void 0)}}(this))},e.prototype.restartServer=function(){return this.startServer()},e.prototype.changePort=function(){},e.prototype.getLocalFilePathWithRedirect=function(t){var e,n,r,o,i,u,s,c,a;if(n=/^((http[s]?|ftp|chrome-extension|file):\/\/)?\/?([^\/\.]+\.)*?([^\/\.]+\.[^:\/\s\.]{2,3}(\.[^:\/\s\.]‌​{2,3})?)(:\d+)?($|\/)([^#?\s]+)?(.*?)?(#[\w\-]+)?$/,null==(null!=(s=this.data[this.currentTabId])?s.maps:void 0))return null;if(o=null!=(c=t.match(n))?c[8]:void 0,null==o&&(o=t),null==o)return null;for(a=this.data[this.currentTabId].maps,i=0,u=a.length;u>i;i++)if(r=a[i],o=null!=t.match(new RegExp(r.url))&&null!=r.url){"undefined"!=typeof referer&&null!==referer||(e=t.replace(new RegExp(r.url),r.regexRepl));break}return e},e.prototype.URLtoLocalPath=function(t){var e;return e=this.Redirect.getLocalFilePathWithRedirect(t)},e.prototype.getFileMatch=function(t,e){return null==t?"function"==typeof e?e("file not found"):void 0:(show("trying "+t),this.findFileForPath(this.data.directories,t,function(n){return function(r,o,i){return null!=r?"function"==typeof e?e(r):void 0:(delete o.entry,n.data.currentFileMatches[t]={fileEntry:chrome.fileSystem.retainEntry(o),filePath:t,directory:i},"function"==typeof e?e(null,n.data.currentFileMatches[t],i):void 0)}}(this)))},e.prototype.findFileInDirectories=function(t,e,n){var r,o,i;return r=t.slice(),i=e,o=r.shift(),this.FS.getLocalFileEntry(o,i,function(t){return function(e,u){return null!=e?r.length>0?t.findFileInDirectories(r,i,n):"function"==typeof n?n("not found"):void 0:"function"==typeof n?n(null,u,o):void 0}}(this))},e.prototype.findFileForPath=function(t,e,n){return this.findFileInDirectories(t,e,function(r){return function(o,i,u){return null!=o?e===e.replace(/.*?\//,"")?"function"==typeof n?n("not found"):void 0:r.findFileForPath(t,e.replace(/.*?\//,""),n):"function"==typeof n?n(null,i,u):void 0}}(this))},e.prototype.mapAllResources=function(t){return this.getResources(function(e){return function(){var n,r,o,i,u,s,c,a,f;for(i=e.data.currentResources.length,n=u=0,a=e.data.currentResources,f=[],s=0,c=a.length;c>s;s++)r=a[s],o=e.URLtoLocalPath(r.url),null!=o?f.push(e.getFileMatch(o,function(e){return i--,show(arguments),null!=e?u++:n++,0===i?n>0?"function"==typeof t?t(null,"done"):void 0:"function"==typeof t?t("nothing found"):void 0:void 0})):(i--,u++,f.push(0===i?"function"==typeof t?t("nothing found"):void 0:void 0));return f}}(this))},e.prototype.setBadgeText=function(t){var e;return e=t||""+Object.keys(this.data.currentFileMatches).length,chrome.browserAction.setBadgeText({text:e})},e.prototype.removeBadgeText=function(){return chrome.browserAction.setBadgeText({text:""})},e.prototype.lsR=function(t){return this.results={},chrome.fileSystem.restoreEntry(t.directoryEntryId,function(){return function(){var t,e,n;return n=0,e=/.git|.idea|node_modules|bower_components/,void(t=function(r,o){var i;return n++,i=r.createReader(),i.readEntries(function(r){var i,u,s,c;for(n--,u=function(r){return o[r.fullPath]=r,null===r.fullPath.match(e)&&r.isDirectory?(n++,t(r,o)):void 0},s=0,c=r.length;c>s;s++)i=r[s],u(i);return 0===n?show("onsuccess"):void 0},function(){return n--})})}}(this))},e}(r),e.exports=n},{"./config.coffee":3,"./filesystem.coffee":4,"./listen.coffee":5,"./msg.coffee":6,"./notification.coffee":8,"./server.coffee":9,"./storage.coffee":10,"./util.coffee":11}],3:[function(t,e){var n;n=function(){function t(){this.EXT_ID=this.APP_ID===this.SELF_ID?this.EXTENSION_ID:this.APP_ID,this.EXT_TYPE=this.APP_ID===this.SELF_ID?"EXTENSION":"APP",this.SELF_TYPE=this.APP_ID!==this.SELF_ID?"EXTENSION":"APP"}return t.prototype.APP_ID="denefdoofnkgjmpbfpknihpgdhahpblh",t.prototype.EXTENSION_ID="ijcjmpejonmimoofbcpaliejhikaeomh",t.prototype.SELF_ID=chrome.runtime.id,t.prototype.isContentScript="chrome-extension:"!==location.protocol,t.prototype.EXT_ID=null,t.prototype.EXT_TYPE=null,t.prototype.wrapInbound=function(t,e,n){var r;return r=t,this.LISTEN.Ext(e,function(t){var e;return null!=(null!=t?t.isProxy:void 0)&&"function"==typeof arguments[1]?(null!=(e=t.arguments)?e.length:void 0)>=0?n.apply(r,t.arguments.concat(arguments[1])):n.apply(r,[].concat(arguments[1])):n.apply(r,arguments)})},t.prototype.wrapObjInbound=function(t){var e;for(e in t)"function"==typeof t[e]&&(t[e]=this.wrapInbound(t,t.constructor.name+"."+e,t[e]));return t},t.prototype.wrapOutbound=function(t,e){return function(){var t,n,r;return n={},n[e]={isProxy:!0,arguments:Array.prototype.slice.call(arguments)},n[e].isProxy=!0,r=Array.prototype.slice.call(arguments),0===r.length?(n[e].arguments=void 0,this.MSG.Ext(n,function(){return void 0})):(n[e].arguments=r,t=n[e].arguments.pop(),"function"!=typeof t?(n[e].arguments.push(t),this.MSG.Ext(n,function(){return void 0})):this.MSG.Ext(n,function(e){return function(){var n,r;return n=Array.prototype.slice.call(arguments),(null!=n?n.length:void 0)>0&&null!=(null!=(r=n[0])?r.isProxy:void 0)?t.apply(e,n[0].isProxy):void 0}}(this)))}},t.prototype.wrapObjOutbound=function(t){var e;for(e in t)"function"==typeof t[e]&&(t[e]=this.wrapOutbound(t,t.constructor.name+"."+e,t[e]));return t},t}(),e.exports=n},{}],4:[function(t,e){var n,r,o,i=function(t,e){return function(){return t.apply(e,arguments)}};r=t("./listen.coffee"),o=t("./msg.coffee"),n=function(){function t(){this.getLocalFileEntry=i(this.getLocalFileEntry,this)}return t.prototype.api=chrome.fileSystem,t.prototype.retainedDirs={},t.prototype.LISTEN=r.get(),t.prototype.MSG=o.get(),t.prototype.readFile=function(t,e,n){return this.getFileEntry(t,e,function(){return function(t,e){return null!=t?"function"==typeof n?n(t):void 0:e.file(function(t){return"function"==typeof n?n(null,e,t):void 0},function(t){return"function"==typeof n?n(t):void 0})}}(this))},t.prototype.getFileEntry=function(t,e,n){return t.getFile(e,{},function(){return function(t){return"function"==typeof n?n(null,t):void 0}}(this),function(){return function(t){return"function"==typeof n?n(t):void 0}}(this))},t.prototype.openDirectory=function(t,e){return this.api.getDisplayPath(t,function(n){return function(r){var o;return o={relPath:t.fullPath,directoryEntryId:n.api.retainEntry(t),entry:t},"function"==typeof e?e(null,r,o):void 0}}(this))},t.prototype.getLocalFileEntry=function(t,e,n){var r;return r=chrome.fileSystem.restoreEntry(t.directoryEntryId,function(){}),null==r?chrome.fileSystem.restoreEntry(t.directoryEntryId,function(t){return function(r){return t.getFileEntry(r,e,n)}}(this)):this.getFileEntry(r,e,n)},t}(),e.exports=n},{"./listen.coffee":5,"./msg.coffee":6}],5:[function(t,e){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s=[].slice;n=t("./config.coffee"),r=function(t){function e(){this._onMessage=o(this._onMessage,this),this._onMessageExternal=o(this._onMessageExternal,this),this.Ext=o(this.Ext,this),this.Local=o(this.Local,this);var t;e.__super__.constructor.apply(this,arguments),chrome.runtime.onConnectExternal.addListener(function(t){return function(e){return e.onMessage.addListener(t._onMessageExternal)}}(this)),this.local.api.addListener(this._onMessage),null!=(t=this.external.api)&&t.addListener(this._onMessageExternal)}var n;return u(e,t),e.prototype.local={api:chrome.runtime.onMessage,listeners:{}},e.prototype.external={api:chrome.runtime.onMessageExternal,listeners:{}},n=null,e.get=function(){return null!=n?n:n=new e},e.prototype.Local=function(t,e){return this.local.listeners[t]=e},e.prototype.Ext=function(t,e){return this.external.listeners[t]=e},e.prototype._onMessageExternal=function(t,e,n){var r,o,i,u;if(o={called:!1},u=function(){return function(){var t,e,r;r=1<=arguments.length?s.call(arguments,0):[];try{n.apply(null,e=[{isProxy:r}])}catch(i){t=i}return o.called=!0}}(this),e.id!==this.EXT_ID&&"Port"!==e.constructor.name)return!1;for(r in t)"function"==typeof(i=this.external.listeners)[r]&&i[r](t[r],u);return o.called?void 0:!0},e.prototype._onMessage=function(t,e,n){var r,o,i,u;o={called:!1},u=function(t){return function(){var e;try{n.apply(t,arguments)}catch(r){e=r}return o.called=!0}}(this);for(r in t)"function"==typeof(i=this.local.listeners)[r]&&i[r](t[r],u);return o.called?void 0:!0},e}(n),e.exports=r},{"./config.coffee":3}],6:[function(t,e){var n,r,o={}.hasOwnProperty,i=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("./config.coffee"),r=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.port=chrome.runtime.connect(this.EXT_ID)}var n;return i(e,t),n=null,e.prototype.port=null,e.get=function(){return null!=n?n:n=new e},e.createPort=function(){},e.prototype.Local=function(t,e){var n;for(n in t)show("== MESSAGE "+n+" ==>");return chrome.runtime.sendMessage(t,e)},e.prototype.Ext=function(t,e){var n;for(n in t)show("== MESSAGE EXTERNAL "+n+" ==>");return chrome.runtime.sendMessage(this.EXT_ID,t,e)},e.prototype.ExtPort=function(t){try{return this.port.postMessage(t)}catch(e){return this.port=chrome.runtime.connect(this.EXT_ID),this.port.postMessage(t)}},e}(n),e.exports=r},{"./config.coffee":3}],7:[function(t,e,n){"use strict";!function(t){"object"==typeof n?e.exports=t():"function"==typeof define&&define.amd?define(t):(window.WatchJS=t(),window.watch=window.WatchJS.watch,window.unwatch=window.WatchJS.unwatch,window.callWatchers=window.WatchJS.callWatchers)}(function(){var t={noMore:!1},e=[],n=function(t){var e={};return t&&"[object Function]"==e.toString.call(t)},r=function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=function(t,e){var n=[],o=[];if("string"!=typeof t&&"string"!=typeof e){if(r(t))for(var i=0;i<t.length;i++)void 0===e[i]&&n.push(i);else for(var i in t)t.hasOwnProperty(i)&&void 0===e[i]&&n.push(i);if(r(e))for(var u=0;u<e.length;u++)void 0===t[u]&&o.push(u);else for(var u in e)e.hasOwnProperty(u)&&void 0===t[u]&&o.push(u)}return{added:n,removed:o}},i=function(t){if(null==t||"object"!=typeof t)return t;var e=t.constructor();for(var n in t)e[n]=t[n];return e},u=function(t,e,n,r){try{Object.observe(t[e],function(t){r(t)})}catch(o){try{Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}catch(i){try{Object.prototype.__defineGetter__.call(t,e,n),Object.prototype.__defineSetter__.call(t,e,r)}catch(u){throw new Error("watchJS error: browser not supported :/")}}}},s=function(t,e,n){try{Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!1,value:n})}catch(r){t[e]=n}},c=function(){n(arguments[1])?a.apply(this,arguments):r(arguments[1])?f.apply(this,arguments):p.apply(this,arguments)},a=function(t,e,n,o,i){if("string"!=typeof t&&(t instanceof Object||r(t))){var u=[];if(r(t))for(var s=0;s<t.length;s++)u.push(s);else for(var c in t)t.hasOwnProperty(c)&&u.push(c);f(t,u,e,n,o,i),o&&E(t,"$$watchlengthsubjectroot",e,n)}},f=function(t,e,n,o,i,u){if("string"!=typeof t&&(t instanceof Object||r(t)))for(var s=0;s<e.length;s++){var c=e[s];p(t,c,n,o,i,u)}},p=function(t,e,o,i,u,s){"string"!=typeof t&&(t instanceof Object||r(t))&&(n(t[e])||(null!=t[e]&&(void 0===i||i>0)&&a(t[e],o,void 0!==i?i-1:i,null,s+"."+e),y(t,e,o,i,s),u&&(void 0===i||i>0)&&E(t,e,o,i)))},l=function(){n(arguments[1])?h.apply(this,arguments):r(arguments[1])?d.apply(this,arguments):S.apply(this,arguments)},h=function(t,e){if(!(t instanceof String)&&(t instanceof Object||r(t)))if(r(t)){for(var n=[],o=0;o<t.length;o++)n.push(o);d(t,n,e)}else{var i=function(t){var n=[];for(var r in t)t.hasOwnProperty(r)&&(t[r]instanceof Object?i(t[r]):n.push(r));d(t,n,e)};i(t)}},d=function(t,e,n){for(var r in e)e.hasOwnProperty(r)&&S(t,e[r],n)},y=function(e,n,r,o,i){var c=e[n];w(e,n),e.watchers||s(e,"watchers",{}),e._path||s(e,"_path",i),e.watchers[n]||(e.watchers[n]=[]);for(var f=0;f<e.watchers[n].length;f++)if(e.watchers[n][f]===r)return;e.watchers[n].push(r);var p=function(){return c},l=function(i){var u=c;c=i,0!==o&&e[n]&&a(e[n],r,void 0===o?o:o-1),w(e,n),t.noMore||u!==i&&(v(e,n,"set",i,u),t.noMore=!1)};u(e,n,p,l)},v=function(t,e,n,r,o){if(void 0!==e)for(var i=0;i<t.watchers[e].length;i++)t.watchers[e][i].call(t,e,n,r,o);else for(var e in t)t.hasOwnProperty(e)&&v(t,e,n,r,o)},g=["pop","push","reverse","shift","sort","slice","unshift","splice"],m=function(t,e,n,r){s(t[e],r,function(){var o=n.apply(t[e],arguments);return p(t,t[e]),"slice"!==r&&v(t,e,r,arguments),o})},w=function(t,e){if(t[e]&&!(t[e]instanceof String)&&r(t[e]))for(var n,o=g.length;o--;)n=g[o],m(t,e,t[e][n],n)},S=function(t,e,n){for(var r=0;r<t.watchers[e].length;r++){var o=t.watchers[e][r];o==n&&t.watchers[e].splice(r,1)}_(t,e,n)},b=function(){for(var t=0;t<e.length;t++){var n=e[t];if("$$watchlengthsubjectroot"===n.prop){var r=o(n.obj,n.actual);(r.added.length||r.removed.length)&&r.added!=r.removed&&r.added[0]!=r.removed[0]&&(r.added.length&&f(n.obj,r.added,n.watcher,n.level-1,!0),n.watcher.call(n.obj,"root","differentattr",r,n.actual)),n.actual=i(n.obj)}else{if(null==n.obj[n.prop])return;var r=o(n.obj[n.prop],n.actual);if(r.added.length||r.removed.length){if(r.added.length)for(var u=0;u<n.obj.watchers[n.prop].length;u++)f(n.obj[n.prop],r.added,n.obj.watchers[n.prop][u],n.level-1,!0);v(n.obj,n.prop,"differentattr",r,n.actual)}n.actual=i(n.obj[n.prop])}}},E=function(t,n,r,o){var u;u=i("$$watchlengthsubjectroot"===n?t:t[n]),e.push({obj:t,prop:n,actual:u,watcher:r,level:o})},_=function(t,n,r){for(var o=0;o<e.length;o++){var i=e[o];i.obj==t&&i.prop==n&&i.watcher==r&&e.splice(o,1)}};return setInterval(b,50),t.watch=c,t.unwatch=l,t.callWatchers=v,t})},{}],8:[function(t,e){var n;n=function(){function t(){}return t.prototype.show=function(t,e){var n;return n=function(t){var e;for(null==t&&(t=8),e="";e.length<t;)e+=Math.random().toString(36).substr(2);return e.substr(0,t)},chrome.notifications.create(n(),{type:"basic",title:t,message:e,iconUrl:"images/icon-38.png"},function(){return void 0})},t}(),e.exports=n},{}],9:[function(t,e){var n,r=function(t,e){return function(){return t.apply(e,arguments)}};n=function(){function t(){this._onAccept=r(this._onAccept,this),this._onListen=r(this._onListen,this),this._onReceive=r(this._onReceive,this),this.status.host="127.0.0.1",this.status.port=10012,this.status.maxConnections=50,this.status.url="http://"+this.status.host+":"+this.status.port+"/",this.status.isOn=!1}return t.prototype.socket=chrome.socket,t.prototype.socketProperties={persistent:!0,name:"SLRedirector"},t.prototype.getLocalFile=null,t.prototype.socketIds=[],t.prototype.status={host:null,port:null,maxConnections:50,isOn:!1,socketInfo:null,url:null},t.prototype.start=function(t,e,n,r){return null!=t&&(this.status.host=t),null!=e&&(this.status.port=e),null!=n&&(this.status.maxConnections=n),this.killAll(function(t){return function(e){return null!=e?"function"==typeof r?r(e):void 0:(t.status.isOn=!1,t.socket.create("tcp",{},function(e){return t.status.socketInfo=e,t.socketIds=[],t.socketIds.push(t.status.socketInfo.socketId),chrome.storage.sync.set({socketIds:t.socketIds}),t.socket.listen(t.status.socketInfo.socketId,t.status.host,t.status.port,function(e){return e>-1?(show("listening "+t.status.socketInfo.socketId),t.status.isOn=!0,t.socket.accept(t.status.socketInfo.socketId,t._onAccept),"function"==typeof r?r(null,t.status):void 0):"function"==typeof r?r(e):void 0})}))}}(this))},t.prototype.killAll=function(t){return chrome.storage.sync.get("socketIds",function(e){return function(n){var r,o,i,u,s,c;if(e.socketIds=n.socketIds,e.status.isOn=!1,null==e.socketIds)return"function"==typeof t?t(null,"success"):void 0;for(r=0,s=e.socketIds,c=[],i=0,u=s.length;u>i;i++)o=s[i],c.push(function(n){return r++,e.socket.getInfo(n,function(){var o;return r--,null==chrome.runtime.lastError&&(((null!=(o=e.status.socketInfo)?o.connected:void 0)||null==e.status.socketInfo)&&e.socket.disconnect(n),e.socket.destroy(n)),0===r&&"function"==typeof t?t(null,"success"):void 0})}(o));return c}}(this))},t.prototype.stop=function(t){return this.killAll(function(){return function(e,n){return null!=e?"function"==typeof t?t(e):void 0:"function"==typeof t?t(null,n):void 0}}(this))},t.prototype._onReceive=function(t){return show("Client socket 'receive' event: sd="+t.socketId,0/0+t.data.byteLength)},t.prototype._onListen=function(t,e){return 0>e?show("Error Listening: "+chrome.runtime.lastError.message):(this.serverSocketId=t,this.tcpServer.onAccept.addListener(this._onAccept),this.tcpServer.onAcceptError.addListener(this._onAcceptError),this.tcp.onReceive.addListener(this._onReceive))},t.prototype._onAcceptError=function(t){return show(t)},t.prototype._onAccept=function(t){return show("Server socket 'accept' event: sd="+t.socketId),null!=(null!=t?t.socketId:void 0)?this._readFromSocket(t.socketId,function(e){return function(n,r){return null!=n?e._writeError(t.socketId,404,r.keepAlive):e.getLocalFile(r,function(n,o,i){return null!=n?e._writeError(t.socketId,404,r.keepAlive):e._write200Response(t.socketId,o,i,r.keepAlive)})}}(this)):show("No socket?!")},t.prototype.stringToUint8Array=function(t){var e,n,r;for(e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n<t.length;)r[n]=t.charCodeAt(n),n++;return r},t.prototype.arrayBufferToString=function(t){var e,n,r;for(n="",r=new Uint8Array(t),e=0;e<r.length;)n+=String.fromCharCode(r[e]),e++;return n},t.prototype._write200Response=function(t,e,n,r){var o,i,u,s,c,a;return i=""===n.type?"text/plain":n.type,o=n.size,u=this.stringToUint8Array("HTTP/1.0 200 OK\nContent-length: "+n.size+"\nContent-type:"+i+(r?"\nConnection: keep-alive":"")+"\n\n"),s=new ArrayBuffer(u.byteLength+n.size),a=new Uint8Array(s),a.set(u,0),c=new FileReader,c.onload=function(e){return function(n){return a.set(new Uint8Array(n.target.result),u.byteLength),e.socket.write(t,s,function(n){return show(n),e.end(t,r)})}}(this),c.onerror=function(e){return function(){return e.end(t,r)}}(this),c.readAsArrayBuffer(n)},t.prototype._readFromSocket=function(t,e){return this.socket.read(t,function(n){return function(r){var o,i,u,s,c,a;return show("READ",r),o=n.arrayBufferToString(r.data),show(o),u=!1,o.indexOf(!0)&&(u=!0),0!==o.indexOf("GET ")?"function"==typeof e?e("404",{keepAlive:u}):void 0:(c=o.indexOf(" ",4),0>c?end(t):(s=o.substring(4,c),null==s?"function"==typeof e?e("404",{keepAlive:u}):void 0:(i={uri:s,keepAlive:u},i.referer=null!=(a=o.match(/Referer:\s(.*)/))?a[1]:void 0,"function"==typeof e?e(null,i):void 0)))}}(this))},t.prototype.end=function(t){return this.socket.disconnect(t),this.socket.destroy(t),show("ending "+t),this.socket.accept(this.status.socketInfo.socketId,this._onAccept)},t.prototype._writeError=function(t,e,n){var r,o,i,u,s,c;return i={size:0},o="text/plain",r=i.size,u=this.stringToUint8Array("HTTP/1.0 "+e+" Not Found\nContent-length: "+i.size+"\nContent-type:"+o+(n?"\nConnection: keep-alive":"")+"\n\n"),s=new ArrayBuffer(u.byteLength+i.size),c=new Uint8Array(s),c.set(u,0),this.socket.write(t,s,function(e){return function(r){return show("WRITE",r),e.end(t,n)}}(this))},t}(),e.exports=n},{}],10:[function(t,e){var n,r,o,i,u,s,c;n=t("./listen.coffee"),r=t("./msg.coffee"),i=t("watchjs"),c=i.watch,s=i.unwatch,u=i.callWatchers,o=function(){function t(t){null!=t&&(this.onDataLoaded=t),this.api.get(function(t){return function(n){var r;for(r in n)t.data[r]=n[r];return e(t,"dataChanged",t.data,!0),e(t,"sessionData",t.session,!1),t.onDataLoaded(t.data)}}(this)),this.init()}var e;return t.prototype.api=chrome.storage.local,t.prototype.LISTEN=n.get(),t.prototype.MSG=r.get(),t.prototype.data={currentResources:[],directories:[],maps:[],tabMaps:{},currentFileMatches:{}},t.prototype.session={},t.prototype.onDataLoaded=function(){},t.prototype.callback=function(){},t.prototype.notifyOnChange=function(){},t.prototype.init=function(){},t.prototype.isArray=function(){return Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)}},e=function(t,e,n,r){var o;return o=function(o,i){var u;return t.noWatch!==!1||/^\d+$/.test(o)?void 0:(show(arguments),r&&t.api.set(n),u={},u[e]=n,t.MSG.ExtPort(u))},t.noWatch=!1,c(n,o,3,!0),t.LISTEN.Ext(e,function(e){var r;t.noWatch=!0;for(r in e)n[r]=e[r];return setTimeout(function(){return t.noWatch=!1},200)})},t.prototype.save=function(t,e,n){var r;return r={},r[t]=e,this.data[t]=e,this.api.set(r,function(t){return function(){return"function"==typeof n&&n(),"function"==typeof t.callback?t.callback():void 0}}(this))},t.prototype.saveAll=function(t,e){return null!=t?this.api.set(t,function(){return function(){return"function"==typeof e?e():void 0}}(this)):this.api.set(this.data,function(){return function(){return"function"==typeof e?e():void 0}}(this))},t.prototype.retrieve=function(t,e){return this.observer.stop(),this.api.get(t,function(n){var r;for(r in n)this.data[r]=n[r];return null!=e?e(n[t]):void 0})},t.prototype.retrieveAll=function(t){return this.api.get(function(e){return function(n){var r;for(r in n)e.data[r]=n[r],e.MSG.ExtPort({dataChanged:{path:r,value:n[r]}});return e.api.set(e.data),"function"==typeof t&&t(n),e.onDataLoaded(e.data)}}(this))},t.prototype.onDataLoaded=function(){},t.prototype.onChanged=function(t,e){return chrome.storage.onChanged.addListener(function(n){return null!=n[t]&&null!=e&&e(n[t].newValue),"function"==typeof this.callback?this.callback(n):void 0})},t.prototype.onChangedAll=function(){return chrome.storage.onChanged.addListener(function(t){return function(e){var n,r;r=!1;for(n in e)e[n].newValue!==e[n].oldValue&&"socketIds"!==n;return r&&"function"==typeof t.callback&&t.callback(e),r?show("changed"):void 0}}(this))},t}(),e.exports=o},{"./listen.coffee":5,"./msg.coffee":6,watchjs:7}],11:[function(t,e){e.exports=function(){var t,e;return t=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],e=function(){var n,r,o,i;for(i=[],r=0,o=t.length;o>r;r++)n=t[r],console[n]||i.push(console[n]=e);return i},window.show=null!=Function.prototype.bind?Function.prototype.bind.call(console.log,console):function(){return Function.prototype.apply.call(console.log,console,arguments)}}()},{}]},{},[1]);