!function t(e,n,r){function o(s,u){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var a=n[s]={exports:{}};e[s][0].call(a.exports,function(t){var n=e[s][1][t];return o(n?n:t)},a,a.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t){var e,n,r,o,i,s,u;s=function(){var t;return(t=function(){return this})()},u=s(),e=t("../../common.coffee"),chrome.app.runtime.onLaunched.addListener(function(){return chrome.app.window.create("index.html",{id:"mainwin",bounds:{width:770,height:800}})}),n=t("../../config.coffee"),i=t("../../storage.coffee"),r=t("../../filesystem.coffee"),o=t("../../server.coffee"),u.app=new e({Storage:new i,FS:new r,Server:new o}),u.app.Server.getLocalFile=app.getLocalFile,chrome.runtime.onSuspend.addListener(function(){return u.app.Storage.saveAll(null)})},{"../../common.coffee":2,"../../config.coffee":3,"../../filesystem.coffee":4,"../../server.coffee":12,"../../storage.coffee":13}],2:[function(t,e){var n,r,o,i,s,u,c,a,f=function(t,e){return function(){return t.apply(e,arguments)}},p={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var r in e)p.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t("./util.coffee"),r=t("./config.coffee"),s=t("./msg.coffee"),i=t("./listen.coffee"),a=t("./storage.coffee"),o=t("./filesystem.coffee"),u=t("./notification.coffee"),c=t("./server.coffee"),n=function(t){function e(t){this.changePort=f(this.changePort,this),this.getLocalFile=f(this.getLocalFile,this),this.openApp=f(this.openApp,this);var n;e.__super__.constructor.apply(this,arguments),null==this.MSG&&(this.MSG=s.get()),null==this.LISTEN&&(this.LISTEN=i.get());for(n in t)"object"==typeof t[n]&&(this[n]=this.wrapObjInbound(t[n])),"function"==typeof t[n]&&(this[n]=this.wrapObjOutbound(new t[n]));this.Storage.onDataLoaded=function(t){return function(){return t.Storage.data.server={status:t.Server.status}}}(this),null==this.Notify&&(this.Notify=(new u).show),this.data=this.Storage.data,this.wrap="APP"===this.SELF_TYPE?this.wrapInbound:this.wrapOutbound,this.openApp=this.wrap(this,"Application.openApp",this.openApp),this.launchApp=this.wrap(this,"Application.launchApp",this.launchApp),this.startServer=this.wrap(this,"Application.startServer",this.startServer),this.restartServer=this.wrap(this,"Application.restartServer",this.restartServer),this.stopServer=this.wrap(this,"Application.stopServer",this.stopServer),this.getFileMatch=this.wrap(this,"Application.getFileMatch",this.getFileMatch),this.wrap="EXTENSION"===this.SELF_TYPE?this.wrapInbound:this.wrapOutbound,this.getResources=this.wrap(this,"Application.getResources",this.getResources),this.getCurrentTab=this.wrap(this,"Application.getCurrentTab",this.getCurrentTab),chrome.runtime.getPlatformInfo(function(t){return function(e){return t.platform=e}}(this)),this.init()}return l(e,t),e.prototype.LISTEN=null,e.prototype.MSG=null,e.prototype.Storage=null,e.prototype.FS=null,e.prototype.Server=null,e.prototype.Notify=null,e.prototype.platform=null,e.prototype.currentTabId=null,e.prototype.init=function(){},e.prototype.getCurrentTab=function(t){return chrome.tabs.query({active:!0,currentWindow:!0},function(e){return function(n){return e.currentTabId=n[0].id,"function"==typeof t?t(e.currentTabId):void 0}}(this))},e.prototype.launchApp=function(t,e){return chrome.management.launchApp(this.APP_ID,function(){return function(n){return chrome.runtime.lastError?e(chrome.runtime.lastError):"function"==typeof t?t(n):void 0}}(this))},e.prototype.openApp=function(){return chrome.app.window.create("index.html",{id:"mainwin",bounds:{width:770,height:800}},function(t){return function(e){return t.appWindow=e}}(this))},e.prototype.getCurrentTab=function(t){return chrome.tabs.query({active:!0,currentWindow:!0},function(e){return function(n){return e.currentTabId=n[0].id,"function"==typeof t?t(e.currentTabId):void 0}}(this))},e.prototype.getResources=function(t){return this.getCurrentTab(function(e){return function(n){return chrome.tabs.executeScript(n,{file:"scripts/content.js"},function(n){var r,o,i,s,u,c;for(e.data.currentResources.length=0,i=0,u=n.length;u>i;i++)for(r=n[i],s=0,c=r.length;c>s;s++)o=r[s],e.data.currentResources.push(o);return"function"==typeof t?t(null,e.data.currentResources):void 0})}}(this))},e.prototype.getLocalFile=function(t,e){var n,r,o,i,s,u;if(r=t.uri,null==r)return e("file not found");for(o=[],u=this.data.directories,i=0,s=u.length;s>i;i++)n=u[i],n.isOn&&o.push(n);return"/"===r.substring(0,1)&&(r=r.substring(1)),this.findFileForPath(o,r,function(){return function(t,n){return null!=t?"function"==typeof e?e(t):void 0:n.file(function(t){return"function"==typeof e?e(null,n,t):void 0},function(t){return"function"==typeof e?e(t):void 0})}}(this))},e.prototype.startServer=function(t){return this.Server.status.isOn===!1?this.Server.start(null,null,null,function(e){return function(n){return null!=n?(e.Notify("Server Error","Error Starting Server: "+error),"function"==typeof t?t(n):void 0):(e.Notify("Server Started","Started Server "+e.Server.status.url),"function"==typeof t?t(null,e.Server.status):void 0)}}(this)):void 0},e.prototype.stopServer=function(t){return this.Server.stop(function(e){return function(n){return null!=n?(e.Notify("Server Error","Server could not be stopped: "+error),"function"==typeof t?t(n):void 0):(e.Notify("Server Stopped","Server Stopped"),"function"==typeof t?t(null,e.Server.status):void 0)}}(this))},e.prototype.restartServer=function(){return this.startServer()},e.prototype.changePort=function(){},e.prototype.getLocalFilePathWithRedirect=function(t){var e,n,r,o,i,s,u,c,a;if(n=/^((http[s]?|ftp|chrome-extension|file):\/\/)?\/?([^\/\.]+\.)*?([^\/\.]+\.[^:\/\s\.]{2,3}(\.[^:\/\s\.]‌​{2,3})?)(:\d+)?($|\/)([^#?\s]+)?(.*?)?(#[\w\-]+)?$/,null==(null!=(u=this.data[this.currentTabId])?u.maps:void 0))return null;if(o=null!=(c=t.match(n))?c[8]:void 0,null==o&&(o=t),null==o)return null;for(a=this.data[this.currentTabId].maps,i=0,s=a.length;s>i;i++)if(r=a[i],o=null!=t.match(new RegExp(r.url))&&null!=r.url){"undefined"!=typeof referer&&null!==referer||(e=t.replace(new RegExp(r.url),r.regexRepl));break}return e},e.prototype.URLtoLocalPath=function(t){var e;return e=this.Redirect.getLocalFilePathWithRedirect(t)},e.prototype.getFileMatch=function(t,e){return null==t?"function"==typeof e?e("file not found"):void 0:(show("trying "+t),this.findFileForPath(this.data.directories,t,function(n){return function(r,o,i){return null!=r?(show("no files found for "+t),"function"==typeof e?e(r):void 0):(delete o.entry,n.data.currentFileMatches[t]={fileEntry:chrome.fileSystem.retainEntry(o),filePath:t,directory:i},"function"==typeof e?e(null,n.data.currentFileMatches[t],i):void 0)}}(this)))},e.prototype.findFileInDirectories=function(t,e,n){var r,o,i;return r=t.slice(),i=e,o=r.shift(),this.FS.getLocalFileEntry(o,i,function(t){return function(e,s){return null!=e?r.length>0?t.findFileInDirectories(r,i,n):"function"==typeof n?n("not found"):void 0:"function"==typeof n?n(null,s,o):void 0}}(this))},e.prototype.findFileForPath=function(t,e,n){return this.findFileInDirectories(t,e,function(r){return function(o,i,s){return null!=o?e===e.replace(/.*?\//,"")?"function"==typeof n?n("not found"):void 0:r.findFileForPath(t,e.replace(/.*?\//,""),n):"function"==typeof n?n(null,i,s):void 0}}(this))},e.prototype.mapAllResources=function(t){return this.getResources(function(e){return function(){var n,r,o,i,s,u,c,a,f;for(i=e.data.currentResources.length,n=s=0,a=e.data.currentResources,f=[],u=0,c=a.length;c>u;u++)r=a[u],o=e.URLtoLocalPath(r.url),null!=o?f.push(e.getFileMatch(o,function(e){return i--,show(arguments),null!=e?s++:n++,0===i?n>0?"function"==typeof t?t(null,"done"):void 0:"function"==typeof t?t("nothing found"):void 0:void 0})):(i--,s++,f.push(0===i?"function"==typeof t?t("nothing found"):void 0:void 0));return f}}(this))},e.prototype.setBadgeText=function(t){var e;return e=t||""+Object.keys(this.data.currentFileMatches).length,chrome.browserAction.setBadgeText({text:e})},e.prototype.removeBadgeText=function(){return chrome.browserAction.setBadgeText({text:""})},e.prototype.lsR=function(t){return this.results={},chrome.fileSystem.restoreEntry(t.directoryEntryId,function(){return function(){var t,e,n;return n=0,e=/.git|.idea|node_modules|bower_components/,void(t=function(r,o){var i;return n++,i=r.createReader(),i.readEntries(function(r){var i,s,u,c;for(n--,s=function(r){return o[r.fullPath]=r,null===r.fullPath.match(e)&&r.isDirectory?(n++,t(r,o)):void 0},u=0,c=r.length;c>u;u++)i=r[u],s(i);return 0===n?show("onsuccess"):void 0},function(){return n--})})}}(this))},e}(r),e.exports=n},{"./config.coffee":3,"./filesystem.coffee":4,"./listen.coffee":5,"./msg.coffee":6,"./notification.coffee":11,"./server.coffee":12,"./storage.coffee":13,"./util.coffee":14}],3:[function(t,e){var n;n=function(){function t(){this.EXT_ID=this.APP_ID===this.SELF_ID?this.EXTENSION_ID:this.APP_ID,this.EXT_TYPE=this.APP_ID===this.SELF_ID?"EXTENSION":"APP",this.SELF_TYPE=this.APP_ID!==this.SELF_ID?"EXTENSION":"APP"}return t.prototype.APP_ID="denefdoofnkgjmpbfpknihpgdhahpblh",t.prototype.EXTENSION_ID="ijcjmpejonmimoofbcpaliejhikaeomh",t.prototype.SELF_ID=chrome.runtime.id,t.prototype.isContentScript="chrome-extension:"!==location.protocol,t.prototype.EXT_ID=null,t.prototype.EXT_TYPE=null,t.prototype.wrapInbound=function(t,e,n){var r;return r=t,this.LISTEN.Ext(e,function(t){var e;return null!=(null!=t?t.isProxy:void 0)&&"function"==typeof arguments[1]?(null!=(e=t.arguments)?e.length:void 0)>=0?n.apply(r,t.arguments.concat(arguments[1])):n.apply(r,[].concat(arguments[1])):n.apply(r,arguments)})},t.prototype.wrapObjInbound=function(t){var e;for(e in t)"function"==typeof t[e]&&(t[e]=this.wrapInbound(t,t.constructor.name+"."+e,t[e]));return t},t.prototype.wrapOutbound=function(t,e){return function(){var t,n,r;return n={},n[e]={isProxy:!0,arguments:Array.prototype.slice.call(arguments)},n[e].isProxy=!0,r=Array.prototype.slice.call(arguments),0===r.length?(n[e].arguments=void 0,this.MSG.Ext(n,function(){return void 0})):(n[e].arguments=r,t=n[e].arguments.pop(),"function"!=typeof t?(n[e].arguments.push(t),this.MSG.Ext(n,function(){return void 0})):this.MSG.Ext(n,function(e){return function(){var n,r;return n=Array.prototype.slice.call(arguments),(null!=n?n.length:void 0)>0&&null!=(null!=(r=n[0])?r.isProxy:void 0)?t.apply(e,n[0].isProxy):void 0}}(this)))}},t.prototype.wrapObjOutbound=function(t){var e;for(e in t)"function"==typeof t[e]&&(t[e]=this.wrapOutbound(t,t.constructor.name+"."+e,t[e]));return t},t}(),e.exports=n},{}],4:[function(t,e){var n,r,o,i=function(t,e){return function(){return t.apply(e,arguments)}};r=t("./listen.coffee"),o=t("./msg.coffee"),n=function(){function t(){this.getLocalFileEntry=i(this.getLocalFileEntry,this)}return t.prototype.api=chrome.fileSystem,t.prototype.retainedDirs={},t.prototype.LISTEN=r.get(),t.prototype.MSG=o.get(),t.prototype.readFile=function(t,e,n){return this.getFileEntry(t,e,function(){return function(t,e){return null!=t?"function"==typeof n?n(t):void 0:e.file(function(t){return"function"==typeof n?n(null,e,t):void 0},function(t){return"function"==typeof n?n(t):void 0})}}(this))},t.prototype.getFileEntry=function(t,e,n){return t.getFile(e,{},function(){return function(t){return"function"==typeof n?n(null,t):void 0}}(this),function(){return function(t){return"function"==typeof n?n(t):void 0}}(this))},t.prototype.openDirectory=function(t,e){return this.api.getDisplayPath(t,function(n){return function(r){var o;return o={relPath:t.fullPath,directoryEntryId:n.api.retainEntry(t),entry:t},"function"==typeof e?e(null,r,o):void 0}}(this))},t.prototype.getLocalFileEntry=function(t,e,n){var r;return r=chrome.fileSystem.restoreEntry(t.directoryEntryId,function(){}),null==r?chrome.fileSystem.restoreEntry(t.directoryEntryId,function(t){return function(r){return t.getFileEntry(r,e,n)}}(this)):this.getFileEntry(r,e,n)},t}(),e.exports=n},{"./listen.coffee":5,"./msg.coffee":6}],5:[function(t,e){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u=[].slice;n=t("./config.coffee"),r=function(t){function e(){this._onMessage=o(this._onMessage,this),this._onMessageExternal=o(this._onMessageExternal,this),this.Ext=o(this.Ext,this),this.Local=o(this.Local,this);var t;e.__super__.constructor.apply(this,arguments),chrome.runtime.onConnectExternal.addListener(function(t){return function(e){return e.onMessage.addListener(t._onMessageExternal)}}(this)),this.local.api.addListener(this._onMessage),null!=(t=this.external.api)&&t.addListener(this._onMessageExternal)}var n;return s(e,t),e.prototype.local={api:chrome.runtime.onMessage,listeners:{}},e.prototype.external={api:chrome.runtime.onMessageExternal,listeners:{}},n=null,e.get=function(){return null!=n?n:n=new e},e.prototype.Local=function(t,e){return this.local.listeners[t]=e},e.prototype.Ext=function(t,e){return this.external.listeners[t]=e},e.prototype._onMessageExternal=function(t,e,n){var r,o,i,s;if(o={called:!1},s=function(){return function(){var t,e,r;r=1<=arguments.length?u.call(arguments,0):[];try{n.apply(null,e=[{isProxy:r}])}catch(i){t=i}return o.called=!0}}(this),e.id!==this.EXT_ID&&"Port"!==e.constructor.name)return!1;for(r in t)"function"==typeof(i=this.external.listeners)[r]&&i[r](t[r],s);return o.called?void 0:!0},e.prototype._onMessage=function(t,e,n){var r,o,i,s;o={called:!1},s=function(t){return function(){var e;try{n.apply(t,arguments)}catch(r){e=r}return o.called=!0}}(this);for(r in t)"function"==typeof(i=this.local.listeners)[r]&&i[r](t[r],s);return o.called?void 0:!0},e}(n),e.exports=r},{"./config.coffee":3}],6:[function(t,e){var n,r,o={}.hasOwnProperty,i=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("./config.coffee"),r=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.port=chrome.runtime.connect(this.EXT_ID)}var n;return i(e,t),n=null,e.prototype.port=null,e.get=function(){return null!=n?n:n=new e},e.createPort=function(){},e.prototype.Local=function(t,e){var n;for(n in t)show("== MESSAGE "+n+" ==>");return chrome.runtime.sendMessage(t,e)},e.prototype.Ext=function(t,e){var n;for(n in t)show("== MESSAGE EXTERNAL "+n+" ==>");return chrome.runtime.sendMessage(this.EXT_ID,t,e)},e.prototype.ExtPort=function(t){try{return this.port.postMessage(t)}catch(e){return this.port=chrome.runtime.connect(this.EXT_ID),this.port.postMessage(t)}},e}(n),e.exports=r},{"./config.coffee":3}],7:[function(){"use strict";Object.observe||!function(t,e){function n(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}var r=function(t){var n=t.call(t),r=typeof r;return"object"==typeof e.alert?function(e){return n===t.call(e)||!!e&&typeof e.toString==r&&typeof e.valueOf==r&&/^\s*\bfunction\b/.test(""+e)}:function(e){return n===t.call(e)}}(t.prototype.toString),o=function(){return!!e.setImmediate}(),i=function(){return o?function(t){return setImmediate(t)}:function(t){return setTimeout(t,10)}}(),s=function(){return o?function(t){clearImmediate(t)}:function(t){clearTimeout(t)}}(),u=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},c=function(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e},a=function(t){return"undefined"==typeof t?!1:"get"in t||"set"in t},f=function(t,e,n){if("object"!=typeof t)throw new TypeError("Object.observeObject called on non-object");if(r(e)===!1)throw new TypeError("Object.observeObject: Expecting function");if(Object.isFrozen(e)===!0)throw new TypeError("Object.observeObject: Expecting unfrozen function");if(void 0!==n&&!Array.isArray(n))throw new TypeError("Object.observeObject: Expecting acceptList in the form of an array")},p=function(){var t=[],e=function(e,n,r){f(e,n,r),r||(r=["add","update","delete","reconfigure","setPrototype","preventExtensions"]),Object.getNotifier(e).addListener(n,r),-1===t.indexOf(e)?t.push(e):Object.getNotifier(e)._checkPropertyListing()};e.prototype.deliverChangeRecords=function(t){Object.getNotifier(t).deliverChangeRecords()},t.lastScanned=0;var n=function(t){return function(){var e=0,r=t.length,o=new Date,s=!1;for(e=t.lastScanned;r>e&&!s;e++)Object.getNotifier(t[e])._checkPropertyListing(),s=new Date-o>100;t.lastScanned=r>e?e:0,i(n)}}(t);return i(n),e}(),l=function(t){var e=[],n=[],r=[],o=!1,f=[],p=[],l=this;Object.defineProperty(l,"_watching",{enumerable:!0,get:function(t){return function(){return t}}(t)});var h=function(t,e){var n=(typeof t[e],Object.getOwnPropertyDescriptor(t,e));if("getNotifier"===e||a(n)||!n.enumerable)return!1;if(t instanceof Array&&u(e)){var r=f.length;return f[r]=e,p[r]=t[e],!0}return function(e,n){f[e]=n,p[e]=t[n],Object.defineProperty(t,n,{get:function(){return p[e]},set:function(r){c(p[e],r)||(Object.getNotifier(t).queueUpdate(t,n,"update",p[e]),p[e]=r)}})}(f.length,e),!0};l._checkPropertyListing=function(t){var e,n,r,o,i,s=l._watching,c=Object.keys(s),a=0,d=c.length,y=f.slice(0),v=!t;for(s instanceof Array&&(i=f.length),a=0;d>a;a++)e=c[a],r=s[e],n=typeof r,-1===(o=f.indexOf(e))?h(s,e)&&v&&l.queueUpdate(s,e,"add",null,s[e]):(s instanceof Array&&u(e)&&p[o]!==r&&(v&&l.queueUpdate(s,e,"update",p[o],r),p[o]=r),y.splice(y.indexOf(e),1));if(s instanceof Array&&s.length!==i&&v&&l.queueUpdate(s,"length","update",i,s),v)for(d=y.length,a=0;d>a;a++)o=f.indexOf(y[a]),l.queueUpdate(s,y[a],"delete",p[o]),f.splice(o,1),p.splice(o,1)},l.addListener=function(t,r){var o=e.indexOf(t);-1===o?(e.push(t),n.push(r)):n[o]=r},l.removeListener=function(t){var r=e.indexOf(t);r>-1&&(e.splice(r,1),n.splice(r,1))},l.listeners=function(){return e},l.queueUpdate=function(t,e,n,r){this.queueUpdates([{type:n,object:t,name:e,oldValue:r}])},l.queueUpdates=function(t){var e,n=this,u=0,c=t.length||0;for(u=0;c>u;u++)e=t[u],r.push(e);o&&s(o),o=i(function(){o=!1,n.deliverChangeRecords()})},l.deliverChangeRecords=function(){var t=0,o=e.length;for(t=0;o>t;t++)if(e[t]){var i;if(n[t]){i=[];for(var s=0,u=r.length;u>s;s++)-1!==n[t].indexOf(r[s].type)&&i.push(r[s])}else i=r;i.length&&(e[t]===console.log||e[t](i))}r=[]},l.notify=function(e){if("object"!=typeof e||"string"!=typeof e.type)throw new TypeError("Invalid changeRecord with non-string 'type' property");e.object=t,l.queueUpdates([e])},l._checkPropertyListing(!0)},h=[],d=[];t.getNotifier=function(t){var e=d.indexOf(t),n=e>-1?h[e]:!1;return n||(e=d.length,d[e]=t,n=h[e]=new l(t)),n},t.observe=function(t,e,r){return n(t)?void 0:new p(t,e,r)},t.unobserve=function(t,e){f(t,e);var n=d.indexOf(t),r=n>-1?h[n]:!1;r&&(r.removeListener(e),0===r.listeners().length&&(d.splice(n,1),h.splice(n,1)))}}(Object,this)},{}],8:[function(t,e,n){function r(t,e){this.path=t,this.name=e.name,this.type=e.type,this.object=e.object,this.value=e.object[e.name],this.oldValue=e.oldValue}e.exports=n=r},{}],9:[function(t,e,n){function r(t,e,n){if("object"!=typeof t)throw new TypeError("object expected. got: "+typeof t);return this instanceof r?(s.call(this),void this._bind(t,e,n)):new r(t,e,n)}function o(t,e){return function(n){n.forEach(function(n){var o=n.object,s=n.type,u=n.name,c=o[u],a=e?e+"^^"+u:u;"add"==s&&null!=c&&"object"==typeof c?new r(c,t,a):"delete"==s&&"object"==typeof n.oldValue&&t._remove(n.oldValue),n=new i(a,n),t.emit(s,n),t.emit(s+" "+a,n),t.emit("change",n)})}}var i=t("./change"),s=t("events").EventEmitter;e.exports=n=r;for(var u in s.prototype)r.prototype[u]=s.prototype[u];r.prototype.observers=void 0,r.prototype.onchange=void 0,r.prototype.subject=void 0,r.prototype._bind=function(t,e,n){if(this.subject)throw new Error("already bound!");if(null==t)throw new TypeError("subject cannot be null");this.subject=t,e?e.observers.push(this):this.observers=[this],this.onchange=o(e||this,n),Object.observe(this.subject,this.onchange),this._walk(e||this,n)},r.prototype.deliverChanges=function(){this.observers.forEach(function(t){Object.deliverChangeRecords(t.onchange)})},r.prototype._walk=function(t,e){var n=this.subject;Object.keys(n).forEach(function(o){var i=n[o];if("object"==typeof i&&null!=i){var s=e?e+"^^"+o:o;new r(i,t,s)}})},r.prototype.stop=function(){this.observers.forEach(function(t){Object.unobserve(t.subject,t.onchange)})},r.prototype._remove=function(t){this.observers=this.observers.filter(function(e){return t==e.subject?(Object.unobserve(e.subject,e.onchange),!1):!0})}},{"./change":8,events:10}],10:[function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function o(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,o,u,c,a;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length))throw e=arguments[1],e instanceof Error?e:TypeError('Uncaught, unspecified "error" event.');if(n=this._events[t],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,u=new Array(o-1),c=1;o>c;c++)u[c-1]=arguments[c];n.apply(this,u)}else if(i(n)){for(o=arguments.length,u=new Array(o-1),c=1;o>c;c++)u[c-1]=arguments[c];for(a=n.slice(),o=a.length,c=0;o>c;c++)a[c].apply(this,u)}return!0},n.prototype.addListener=function(t,e){var o;if(!r(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned){var o;o=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,"function"==typeof console.trace)}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),o||(o=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var o=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,o,s,u;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(u=s;u-->0;)if(n[u]===e||n[u].listener&&n[u].listener===e){o=u;break}if(0>o)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?r(t._events[e])?1:t._events[e].length:0}},{}],11:[function(t,e){var n;n=function(){function t(){}return t.prototype.show=function(t,e){var n;return n=function(t){var e;for(null==t&&(t=8),e="";e.length<t;)e+=Math.random().toString(36).substr(2);return e.substr(0,t)},chrome.notifications.create(n(),{type:"basic",title:t,message:e,iconUrl:"images/icon-38.png"},function(){return void 0})},t}(),e.exports=n},{}],12:[function(t,e){var n,r=function(t,e){return function(){return t.apply(e,arguments)}};n=function(){function t(){this._onAccept=r(this._onAccept,this),this._onListen=r(this._onListen,this),this._onReceive=r(this._onReceive,this),this.status.host="127.0.0.1",this.status.port=10012,this.status.maxConnections=50,this.status.url="http://"+this.status.host+":"+this.status.port+"/",this.status.isOn=!1}return t.prototype.socket=chrome.socket,t.prototype.socketProperties={persistent:!0,name:"SLRedirector"},t.prototype.getLocalFile=null,t.prototype.socketIds=[],t.prototype.status={host:null,port:null,maxConnections:50,isOn:!1,socketInfo:null,url:null},t.prototype.start=function(t,e,n,r){return null!=t&&(this.status.host=t),null!=e&&(this.status.port=e),null!=n&&(this.status.maxConnections=n),this.killAll(function(t){return function(e){return null!=e?"function"==typeof r?r(e):void 0:(t.status.isOn=!1,t.socket.create("tcp",{},function(e){return t.status.socketInfo=e,t.socketIds=[],t.socketIds.push(t.status.socketInfo.socketId),chrome.storage.sync.set({socketIds:t.socketIds}),t.socket.listen(t.status.socketInfo.socketId,t.status.host,t.status.port,function(e){return e>-1?(show("listening "+t.status.socketInfo.socketId),t.status.isOn=!0,t.socket.accept(t.status.socketInfo.socketId,t._onAccept),"function"==typeof r?r(null,t.status):void 0):"function"==typeof r?r(e):void 0})}))}}(this))},t.prototype.killAll=function(t){return chrome.storage.sync.get("socketIds",function(e){return function(n){var r,o,i,s,u,c;if(e.socketIds=n.socketIds,e.status.isOn=!1,null==e.socketIds)return"function"==typeof t?t(null,"success"):void 0;for(r=0,u=e.socketIds,c=[],i=0,s=u.length;s>i;i++)o=u[i],c.push(function(n){return r++,e.socket.getInfo(n,function(){var o;return r--,null==chrome.runtime.lastError&&(((null!=(o=e.status.socketInfo)?o.connected:void 0)||null==e.status.socketInfo)&&e.socket.disconnect(n),e.socket.destroy(n)),0===r&&"function"==typeof t?t(null,"success"):void 0})}(o));return c}}(this))},t.prototype.stop=function(t){return this.killAll(function(){return function(e,n){return null!=e?"function"==typeof t?t(e):void 0:"function"==typeof t?t(null,n):void 0}}(this))},t.prototype._onReceive=function(t){return show("Client socket 'receive' event: sd="+t.socketId,0/0+t.data.byteLength)},t.prototype._onListen=function(t,e){return 0>e?show("Error Listening: "+chrome.runtime.lastError.message):(this.serverSocketId=t,this.tcpServer.onAccept.addListener(this._onAccept),this.tcpServer.onAcceptError.addListener(this._onAcceptError),this.tcp.onReceive.addListener(this._onReceive))},t.prototype._onAcceptError=function(t){return show(t)},t.prototype._onAccept=function(t){return show("Server socket 'accept' event: sd="+t.socketId),null!=(null!=t?t.socketId:void 0)?this._readFromSocket(t.socketId,function(e){return function(n,r){return null!=n?e._writeError(t.socketId,404,r.keepAlive):e.getLocalFile(r,function(n,o,i){return null!=n?e._writeError(t.socketId,404,r.keepAlive):e._write200Response(t.socketId,o,i,r.keepAlive)})}}(this)):show("No socket?!")},t.prototype.stringToUint8Array=function(t){var e,n,r;for(e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n<t.length;)r[n]=t.charCodeAt(n),n++;return r},t.prototype.arrayBufferToString=function(t){var e,n,r;for(n="",r=new Uint8Array(t),e=0;e<r.length;)n+=String.fromCharCode(r[e]),e++;return n},t.prototype._write200Response=function(t,e,n,r){var o,i,s,u,c,a;return i=""===n.type?"text/plain":n.type,o=n.size,s=this.stringToUint8Array("HTTP/1.0 200 OK\nContent-length: "+n.size+"\nContent-type:"+i+(r?"\nConnection: keep-alive":"")+"\n\n"),u=new ArrayBuffer(s.byteLength+n.size),a=new Uint8Array(u),a.set(s,0),c=new FileReader,c.onload=function(e){return function(n){return a.set(new Uint8Array(n.target.result),s.byteLength),e.socket.write(t,u,function(n){return show(n),e.end(t,r)})}}(this),c.onerror=function(e){return function(){return e.end(t,r)}}(this),c.readAsArrayBuffer(n)},t.prototype._readFromSocket=function(t,e){return this.socket.read(t,function(n){return function(r){var o,i,s,u,c,a;return show("READ",r),o=n.arrayBufferToString(r.data),show(o),s=!1,o.indexOf(!0)&&(s=!0),0!==o.indexOf("GET ")?"function"==typeof e?e("404",{keepAlive:s}):void 0:(c=o.indexOf(" ",4),0>c?end(t):(u=o.substring(4,c),null==u?"function"==typeof e?e("404",{keepAlive:s}):void 0:(i={uri:u,keepAlive:s},i.referer=null!=(a=o.match(/Referer:\s(.*)/))?a[1]:void 0,"function"==typeof e?e(null,i):void 0)))}}(this))},t.prototype.end=function(t){return this.socket.disconnect(t),this.socket.destroy(t),show("ending "+t),this.socket.accept(this.status.socketInfo.socketId,this._onAccept)},t.prototype._writeError=function(t,e,n){var r,o,i,s,u,c;return i={size:0},o="text/plain",r=i.size,s=this.stringToUint8Array("HTTP/1.0 "+e+" Not Found\nContent-length: "+i.size+"\nContent-type:"+o+(n?"\nConnection: keep-alive":"")+"\n\n"),u=new ArrayBuffer(s.byteLength+i.size),c=new Uint8Array(u),c.set(s,0),this.socket.write(t,u,function(e){return function(r){return show("WRITE",r),e.end(t,n)}}(this))},t}(),e.exports=n},{}],13:[function(t,e){var n,r,o;n=t("./listen.coffee"),r=t("./msg.coffee"),t("observe-js"),window.Observable=t("observed"),o=function(){function t(t){null!=t&&(this.onDataLoaded=t),this.api.get(function(t){return function(e){var n;for(n in e)t.data[n]=e[n];return t.observer=Observable(t.data),t.observer.on("change",function(e){return t.api.set(t.data),t.MSG.ExtPort({dataChanged:e})}),t.LISTEN.Ext("dataChanged",function(e){var n;return null==t.data&&(t.data={}),n=t.data,t.observer.stop(),function(t){var n,r;if(n=e.path.split("^^"),null==t[n[0]])return t[n[0]]=e.value;for(;n.length>1;)r=n.shift(),/^\d+$/.test(r)&&(r=parseInt(r)),t=t[r];return r=n.shift(),/^\d+$/.test(r)&&(r=parseInt(r)),t[r]=e.value}(t.data,t.api),t.observer=Observable(t.data),t.observer.on("change",function(e){return t.api.set(t.data),t.MSG.ExtPort({dataChanged:e})})}),t.onDataLoaded(t.data)}}(this))}return t.prototype.api=chrome.storage.local,t.prototype.LISTEN=n.get(),t.prototype.MSG=r.get(),t.prototype.data={currentResources:[],directories:[],maps:[],tabMaps:{},currentFileMatches:{},server:{}},t.prototype.onDataLoaded=function(){},t.prototype.callback=function(){},t.prototype.notifyOnChange=function(){},t.prototype.init=function(){},t.prototype.isArray=function(){return Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)}},t.prototype.save=function(t,e,n){var r;return r={},r[t]=e,this.data[t]=e,this.api.set(r,function(t){return function(){return"function"==typeof n&&n(),"function"==typeof t.callback?t.callback():void 0}}(this))},t.prototype.saveAll=function(t,e){return null!=t?this.api.set(t,function(){return function(){return"function"==typeof e?e():void 0}}(this)):this.api.set(this.data,function(){return function(){return"function"==typeof e?e():void 0}}(this))},t.prototype.retrieve=function(t,e){return this.observer.stop(),this.api.get(t,function(n){var r;for(r in n)this.data[r]=n[r];return null!=e?e(n[t]):void 0})},t.prototype.retrieveAll=function(t){return this.api.get(function(e){return function(n){var r;for(r in n)delete e.data[r],e.data[r]=n[r],e.MSG.ExtPort({dataChanged:{path:r,value:n[r]}});return e.api.set(e.data),"function"==typeof t&&t(n),e.onDataLoaded(e.data)}}(this))},t.prototype.onDataLoaded=function(){},t.prototype.onChanged=function(t,e){return chrome.storage.onChanged.addListener(function(n){return null!=n[t]&&null!=e&&e(n[t].newValue),"function"==typeof this.callback?this.callback(n):void 0
})},t.prototype.onChangedAll=function(){return chrome.storage.onChanged.addListener(function(t){return function(e){var n,r;r=!1;for(n in e)e[n].newValue!==e[n].oldValue&&"socketIds"!==n;return r&&"function"==typeof t.callback&&t.callback(e),r?show("changed"):void 0}}(this))},t}(),e.exports=o},{"./listen.coffee":5,"./msg.coffee":6,"observe-js":7,observed:9}],14:[function(t,e){e.exports=function(){var t,e;return t=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],e=function(){var n,r,o,i;for(i=[],r=0,o=t.length;o>r;r++)n=t[r],console[n]||i.push(console[n]=e);return i},window.show=null!=Function.prototype.bind?Function.prototype.bind.call(console.log,console):function(){return Function.prototype.apply.call(console.log,console,arguments)}}()},{}]},{},[1]);